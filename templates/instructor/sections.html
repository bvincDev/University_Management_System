<!-- templates/instructor/sections.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>My Sections</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
  <header class="site-header">
    <div class="stripe stripe-top"></div><div class="stripe stripe-mid"></div><div class="stripe stripe-large"></div>
    <h1 class="site-title">University Manager</h1>
    <div class="tab-row"><div class="portal-pill">Instructor Portal</div></div>
  </header>

  <main class="page-body">
    <div style="max-width:1200px;margin:0 auto;">
      <h2>Sections — {{ user_name }}</h2>

      <form method="get" action="{{ url_for('instructor_sections') }}" style="margin-bottom:12px;display:flex;gap:8px;">
        <select name="semester">
          <option value="">All semesters</option>
          <option value="Spring" {% if semester=='Spring' %}selected{% endif %}>Spring</option>
          <option value="Summer" {% if semester=='Summer' %}selected{% endif %}>Summer</option>
          <option value="Fall" {% if semester=='Fall' %}selected{% endif %}>Fall</option>
        </select>
        <input type="number" name="year" placeholder="Year" value="{{ year or '' }}">
        <input type="text" name="q" placeholder="Course number or name" value="{{ q or '' }}">
        <button class="btn" type="submit">Filter</button>
      </form>

      {% if sections %}
      <div class="card">
        <table class="grade-table">
          <thead>
            <tr><th>Course</th><th>Section</th><th>When</th><th>Room</th><th>Capacity</th><th>Enrolled</th><th>Actions</th></tr>
          </thead>
          <tbody>
            {% for s in sections %}
            <tr>
              <td>{{ s.course_number }} — {{ s.course_name }}</td>
              <td>{{ s.sectionID }} • {{ s.semester }} {{ s.year }}</td>
              <td>{% if s.day_of_week and s.start_time and s.end_time %}{{ s.day_of_week }} {{ s.start_time }}–{{ s.end_time }}{% else %}-{% endif %}</td>
              <td>{% if s.room_number %}{{ s.room_number }}{% if s.building_name %} — {{ s.building_name }}{% endif %}{% else %}-{% endif %}</td>
              <td>{{ s.capacity }}</td>
              <td>{{ s.enrolled_count }}</td>
              <td>
                <a class="btn" href="{{ url_for('instructor_section_roster', section_id=s.sectionID) }}">Roster / Grades</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      {% else %}
        <p>No sections found.</p>
      {% endif %}

      <div style="margin-top:16px;">
        <a class="btn" href="{{ url_for('dashboard') }}">Back</a>
      </div>
    </div>
  </main>
</body>
</html>
